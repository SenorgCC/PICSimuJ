<!DOCTYPE html>
<html lang="de" ng-app="pic">
<head>
    <meta charset="UTF-8">
    <title>PIC Simulator Anzeige</title>
    <!--Einbinden von AngularJS-->
    <script type="text/javascript" src="sources/angular.min.js"></script>
    <!--Einbinden von JQuery-->
    <script type="text/javascript" src="sources/jquery-2.1.4.min.js"></script>
    <!--Einbinden von Bootstrap Javascript-Teil-->
    <script type="text/javascript" src="sources/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
    <!--Einbinden von bootstrap-select für die Taktauswahl-->
    <script type="text/javascript" src="sources/bootstrap-3.3.6-dist/js/bootstrap-select.min.js"></script>
    <!--Einbinden von Bootstrap mit AngularJS für die Dateiauswahl-->
    <script type="text/javascript" src="sources/angularbootstrap/angular-animate.js"></script>
    <script type="text/javascript" src="sources/angularbootstrap/angular-touch.js"></script>
    <script type="text/javascript" src="sources/angularbootstrap/ui-bootstrap-tpls-1.3.2.min.js"></script>
    <!--Aufgeteilte AngularJS-Controller zur besseren Orientierung-->
    <script type="text/javascript" src="scripts/maincontroller.js"></script>
    <script type="text/javascript" src="scripts/DataFactory.js"></script>
    <script type="text/javascript" src="scripts/BefehlsspeicherCtrl.js"></script>
    <script type="text/javascript" src="scripts/CpuCtrl.js"></script>
    <script type="text/javascript" src="scripts/RamCtrl.js"></script>
    <script type="text/javascript" src="scripts/DarstellungCtrl.js"></script>
    <script type="text/javascript" src="scripts/AblaufsCtrl.js"></script>
    <!--Eigene CSS-Datei zur Anordnung-->
    <link rel="stylesheet" href="PicSimu.css">
    <!--Einbinden von Bootstrap-select-CSS für die Taktauswahl-->
    <link rel="stylesheet" href="sources/bootstrap-3.3.6-dist/css/bootstrap-select.min.css">
    <!--Einbinden der allgemeinen Bootstrap-CSS für die grundsätzliche Darstellung-->
    <link rel="stylesheet" href="sources/bootstrap-3.3.6-dist/css/bootstrap.min.css">
</head>
<body ng-controller="ramcontroller">
    <div ng-controller="Befehlsspeichercontroller">
    <div ng-controller="CPU">
        <!--Begin der Navbar-->
        <div ng-controller="AblaufsCtrl">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand">PIC Simulator 16F84</a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
                        <!--Linke Seite der Navbar-->
                        <ul class="nav navbar-nav">
                           <li>
                               <form class="navbar-form navbar-left" role="search" >
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="Startapp()">Start</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="oneStepBack()">Ein Schritt zurück</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="oneStep()">Ein Schritt</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="stoppapp()">Stop</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="reset()">Reset</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="runTimer()">Test</button>
                               </form>
                           </li>
                        </ul>
                        <!--Rechte Seite der Navbar-->
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#">Hilfe</a></li>
                        </ul>
                    </div><!-- /.navbar-collapse -->
                </div><!-- /.container-fluid -->
            </nav><!--Ende der Navbar-->



            <div >
                <!--Einlesen des Programmcodes-->
                <div class="codeanzeige" ng-controller="UploadCtrl">
                    <div class="fileUpload btn btn-primary">
                        <span>Upload</span>
                        <input id="uploadBtn" input type="file" on-read-file="showContent($fileContent)" class="upload" />
                    </div>
                    <!--Anzeige des Dateinamens der Hochgeladenen Datei-->
                    <input id="uploadFile" placeholder="Datei auswählen" disabled="disabled" on-read-file="showContent($fileContent)"/>
                <!--Ausgabe des Programmcodes-->
                    <div ng-if="content">
                        <h2>Programmcode</h2>
                           <pre class=".pre-scrollable">
                               <!--Schleife für die Zeilenweise Ausgabe des Dateiinhalts-->
                               <p ng-repeat="line in content" ng-class="{highlighted:checkActive(line)} "><input type="checkbox" ng-click="changeBreakPoint(line)" ng-show="checkBreakpoint(line)"> {{line}}</p>
                           </pre>
                    </div>
                </div>

                <div class="buttons" ng-controller="DropdownCtrl">
                    <div ng-controller="AblaufsCtrl">
                        <!--Anzeige des Dropdownmenüs der Taktauswahl-->
                        <select id="Taktauswahl" class="selectpicker"  ng-model="selectedItem" ng-options="item.name for item in items" ng-change="changetakt()"></select>
                        <!--Anzeige Laufzeitzähler-->
                        <label>Laufzeitzähler: {{Laufzeit}} &micro;s</label>
                    </div>
                </div>

                <div class="ram">
                         <!--Anzeige der Special Function Registers-->
                    <h2>SFR</h2>
                    <table align="left" class="table table-striped">
                        <tr>
                            <td>Indirect_addr</td> <td>{{Indirect_addr}}</td>
                            <td>{{Indirect_addr}}</td> <td>Indirect_addr</td>
                        </tr>
                        <tr>
                            <td>TMR0</td> <td>{{TMR0}}</td>
                            <td>{{OPTION_REG}}</td> <td>OPTION_REG</td>
                        </tr>
                        <tr>
                            <td>PCL</td> <td>{{PCL}}</td>
                            <td>{{PCL}}</td> <td>PCL</td>
                            </tr>
                        <tr>
                            <td>STATUS</td> <td>{{ram[3]}}</td>
                            <td>{{STATUS}}</td> <td>STATUS</td>
                            </tr>
                        <tr>
                            <td>FSR</td> <td>{{FSR}}</td>
                            <td>{{FSR}}</td> <td>FSR</td>
                            </tr>
                        <tr>
                            <td>PORTA</td> <td>{{ram[5]}}</td>
                            <td>{{TRISA}}</td> <td>TRISA</td>
                        </tr>
                        <tr>
                            <td>PORTB</td> <td>{{ram[6]}}</td>
                            <td>{{TRISB}}</td> <td>TRISB</td>
                        </tr>
                        <tr>
                            <td>EEDATA</td>	<td>{{EEDATA}}</td>
                            <td>{{EECON1}}</td>	<td>EECON1</td>
                        </tr>
                        <tr>
                            <td>EEADR</td>	<td>{{EEADR}}</td>
                            <td>{{EECON2}}</td>	<td>EECON2</td>
                        </tr>
                        <tr>
                            <td>PCLATH</td>	<td>{{PCLATH}}</td>
                            <td>{{PCLATH}}</td>	<td>PCLATH</td>
                        </tr>
                        <tr>
                            <td>INTCON</td>	<td>{{ram[11]}}</td>
                            <td></td>	<td>INTCON</td>
                        </tr>
                    </table>

                    <h2>Port B</h2>
                    <table>
                        <tr>
                            <td>7</td>
                            <td>6</td>
                            <td>5</td>
                            <td>4</td>
                            <td>3</td>
                            <td>2</td>
                            <td>1</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td><button ng-click="changePortBbit(7)">7</button></td>
                            <td><button ng-click="changePortBbit(6)">6</button></td>
                            <td><button ng-click="changePortBbit(5)">5</button></td>
                            <td><button ng-click="changePortBbit(4)">4</button></td>
                            <td><button ng-click="changePortBbit(3)">3</button></td>
                            <td><button ng-click="changePortBbit(2)">2</button></td>
                            <td><button ng-click="changePortBbit(1)">1</button></td>
                            <td><button ng-click="changePortBbit(0)">0</button></td>
                        </tr>
                    </table>
                </div>
            <div class="ram">
                <!--Anzeige der General Purpose Registers-->
                <h2>Speicherbelegung</h2>
                <table ng-if="ram" class="table table-striped">
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="00">{{ram[0]}}</button></td>	 <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="01">{{ram[1]}}</button></td>  <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="02">{{ram[2]}}</button></td>  <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="03">{{ram[3]}}</button></td>  <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="04">{{ram[4]}}</button></td>	 <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="05">{{ram[5]}}</button></td>  <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="06">{{ram[6]}}</button></td>  <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="07">{{ram[7]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="08">{{ram[8]}}</button></td>  <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="09">{{ram[9]}}</button></td>  <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="0A">{{ram[10]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="0B">{{ram[11]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="0C">{{ram[12]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="0D">{{ram[13]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="0E">{{ram[14]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="0F">{{ram[15]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="10">{{ram[16]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="11">{{ram[17]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="12">{{ram[18]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="13">{{ram[19]}}</button></td>	<td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="14">{{ram[20]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="15">{{ram[21]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="16">{{ram[22]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="17">{{ram[23]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="18">{{ram[24]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="19">{{ram[25]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="1A">{{ram[26]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="1B">{{ram[27]}}</button></td>	<td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="1C">{{ram[28]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="1D">{{ram[29]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="1E">{{ram[30]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="1F">{{ram[31]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="20">{{ram[32]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="21">{{ram[33]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="22">{{ram[34]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="23">{{ram[35]}}</button></td>	<td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="24">{{ram[36]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="25">{{ram[37]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="26">{{ram[38]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="27">{{ram[39]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="28">{{ram[40]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="29">{{ram[41]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="2A">{{ram[42]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="2B">{{ram[43]}}</button></td>	<td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="2C">{{ram[44]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="2D">{{ram[45]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="2E">{{ram[46]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="2F">{{ram[47]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="30">{{ram[48]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="31">{{ram[49]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="32">{{ram[50]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="33">{{ram[51]}}</button></td>	<td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="34">{{ram[52]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="35">{{ram[53]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="36">{{ram[54]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="37">{{ram[55]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="38">{{ram[56]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="39">{{ram[57]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="3A">{{ram[58]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="3B">{{ram[59]}}</button></td>	<td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="3C">{{ram[60]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="3D">{{ram[61]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="3E">{{ram[62]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="3F">{{ram[63]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="40">{{ram[64]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="41">{{ram[65]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="42">{{ram[66]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="43">{{ram[67]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="44">{{ram[68]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="45">{{ram[69]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="46">{{ram[70]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="47">{{ram[71]}}</button></td>
                    </tr>
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="48">{{ram[72]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="49">{{ram[73]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="4A">{{ram[74]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="4B">{{ram[75]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="4C">{{ram[76]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="4D">{{ram[77]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="4E">{{ram[78]}}</button></td> <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="4F">{{ram[79]}}</button></td>
                    </tr>
                </table>
            </div>

        <!--Zusätzliche Labels für verschiedene Anzeigen-->
            </div>
            <label>DigitalCarry:{{digitCarry}}</label>
            <label>ZeroFlag:{{zeroFlag}}</label>
            <label>CarryFlag:{{carry}}</label>
            <label>Instructions:{{Instructioncounter}}</label>
            <br>
            <label>W_Register:{{w_reg}}</label>
        </div>
    </div>
    </div>

    <div class="modal fade bs-example-modal-sm" id="ramModal" tabindex="-1" role="dialog" aria-labelledby="beispielModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Schließen"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="beispielModalLabel">Speicheradresse</h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="neuerhexwert" class="control-label">Neuer Wert:</label>
                            <input type="text" class="form-control" id="neuerhexwert" size="2" maxlength="2" minlength="2" ng-model="newRamvalue">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Schließen</button>
                    <button type="button" class="btn btn-primary" ng-click="saveNewRam(newRamvalue)" data-dismiss="modal">Speichern</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>