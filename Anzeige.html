<!DOCTYPE html>
<html lang="de" ng-app="pic">
<head>
    <meta charset="UTF-8">
    <title>PIC Simulator Anzeige</title>
    <!--Einbinden von AngularJS-->
    <script type="text/javascript" src="sources/angular.min.js"></script>
    <!--Einbinden von JQuery-->
    <script type="text/javascript" src="sources/jquery-2.1.4.min.js"></script>
    <!--Einbinden von Bootstrap Javascript-Teil-->
    <script type="text/javascript" src="sources/bootstrap-3.3.6-dist/js/bootstrap.js"></script>
    <!--Einbinden von bootstrap-select für die Taktauswahl-->
    <script type="text/javascript" src="sources/bootstrap-3.3.6-dist/js/bootstrap-select.min.js"></script>
    <!--Einbinden von Bootstrap mit AngularJS für die Dateiauswahl-->
    <script type="text/javascript" src="sources/angularbootstrap/angular-animate.js"></script>
    <script type="text/javascript" src="sources/angularbootstrap/angular-touch.js"></script>
    <script type="text/javascript" src="sources/angularbootstrap/ui-bootstrap-tpls-1.3.2.min.js"></script>
    <!--Aufgeteilte AngularJS-Controller zur besseren Orientierung-->
    <script type="text/javascript" src="scripts/maincontroller.js"></script>
    <script type="text/javascript" src="scripts/DataFactory.js"></script>
    <script type="text/javascript" src="scripts/BefehlsspeicherCtrl.js"></script>
    <script type="text/javascript" src="scripts/CpuCtrl.js"></script>
    <script type="text/javascript" src="scripts/RamCtrl.js"></script>
    <script type="text/javascript" src="scripts/DarstellungCtrl.js"></script>
    <script type="text/javascript" src="scripts/AblaufsCtrl.js"></script>
    <!--Eigene CSS-Datei zur Anordnung-->
    <link rel="stylesheet" href="PicSimu.css">
    <!--Einbinden von Bootstrap-select-CSS für die Taktauswahl-->
    <link rel="stylesheet" href="sources/bootstrap-3.3.6-dist/css/bootstrap-select.min.css">
    <!--Einbinden der allgemeinen Bootstrap-CSS für die grundsätzliche Darstellung-->
    <link rel="stylesheet" href="sources/bootstrap-3.3.6-dist/css/bootstrap.min.css">
</head>
<body ng-controller="ramcontroller">
    <div ng-controller="Befehlsspeichercontroller">
    <div ng-controller="CPU">
        <!--Begin der Navbar-->
        <div ng-controller="AblaufsCtrl">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand">PIC Simulator 16F84</a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
                        <!--Linke Seite der Navbar-->
                        <ul class="nav navbar-nav">
                           <li>
                               <form class="navbar-form navbar-left" role="search" >
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="Startapp()">Start</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="oneStepBack()">Ein Schritt zurück</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="oneStep()">Ein Schritt</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="stoppapp()">Stop</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="reset()">Reset</button>
                                   <button type="submit" class="btn btn-default" ng-disabled="!content" ng-click="runTimer()">Test</button>
                               </form>
                           </li>
                        </ul>
                        <!--Rechte Seite der Navbar-->
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#">Hilfe</a></li>
                        </ul>
                    </div><!-- /.navbar-collapse -->
                </div><!-- /.container-fluid -->
            </nav><!--Ende der Navbar-->



            <div >
                <!--Einlesen des Programmcodes-->
                <div class="codeanzeige" ng-controller="UploadCtrl">
                    <div class="fileUpload btn btn-primary">
                        <span>Upload</span>
                        <input id="uploadBtn" input type="file" on-read-file="showContent($fileContent)" class="upload" />
                    </div>
                    <!--Anzeige des Dateinamens der Hochgeladenen Datei-->
                    <input id="uploadFile" placeholder="Datei auswählen" disabled="disabled" on-read-file="showContent($fileContent)"/>
                <!--Ausgabe des Programmcodes-->
                    <div ng-if="content">
                        <h2>Programmcode</h2>
                           <pre class=".pre-scrollable">
                               <!--Schleife für die Zeilenweise Ausgabe des Dateiinhalts-->
                               <p ng-repeat="line in content" ng-class="{highlighted:checkActive(line)} "><input type="checkbox" ng-click="changeBreakPoint(line)" ng-show="checkBreakpoint(line)"> {{line}}</p>
                           </pre>
                    </div>
                </div>

                <div class="buttons" ng-controller="DropdownCtrl">
                    <div ng-controller="AblaufsCtrl">
                        <!--Anzeige des Dropdownmenüs der Taktauswahl-->
                        <select id="Taktauswahl" class="selectpicker"  ng-model="selectedItem" ng-options="item.name for item in items" ng-change="changetakt()"></select>
                        <!--Anzeige Laufzeitzähler-->
                        <label>Laufzeitzähler: {{Laufzeit}} &micro;s</label>
                    </div>
                </div>

                <div class="ram">
                         <!--Anzeige der Special Function Registers-->
                    <h2>SFR</h2>
                    <table align="left" class="table table-striped">
                        <tr>
                            <td>Indirect_addr</td> <td>{{Indirect_addr}}</td>
                            <td>{{Indirect_addr}}</td> <td>Indirect_addr</td>
                        </tr>
                        <tr>
                            <td>TMR0</td> <td>{{TMR0}}</td>
                            <td>{{OPTION_REG}}</td> <td>OPTION_REG</td>
                        </tr>
                        <tr>
                            <td>PCL</td> <td>{{PCL}}</td>
                            <td>{{PCL}}</td> <td>PCL</td>
                            </tr>
                        <tr>
                            <td>STATUS</td> <td>{{ram[3]}}</td>
                            <td>{{STATUS}}</td> <td>STATUS</td>
                            </tr>
                        <tr>
                            <td>FSR</td> <td>{{FSR}}</td>
                            <td>{{FSR}}</td> <td>FSR</td>
                            </tr>
                        <tr>
                            <td>PORTA</td> <td>{{ram[5]}}</td>
                            <td>{{TRISA}}</td> <td>TRISA</td>
                        </tr>
                        <tr>
                            <td>PORTB</td> <td>{{ram[6]}}</td>
                            <td>{{TRISB}}</td> <td>TRISB</td>
                        </tr>
                        <tr>
                            <td>EEDATA</td>	<td>{{EEDATA}}</td>
                            <td>{{EECON1}}</td>	<td>EECON1</td>
                        </tr>
                        <tr>
                            <td>EEADR</td>	<td>{{EEADR}}</td>
                            <td>{{EECON2}}</td>	<td>EECON2</td>
                        </tr>
                        <tr>
                            <td>PCLATH</td>	<td>{{PCLATH}}</td>
                            <td>{{PCLATH}}</td>	<td>PCLATH</td>
                        </tr>
                        <tr>
                            <td>INTCON</td>	<td>{{ram[11]}}</td>
                            <td></td>	<td>INTCON</td>
                        </tr>
                    </table>

                    <h2>Port B</h2>
                    <table>
                        <tr>
                            <td>7</td>
                            <td>6</td>
                            <td>5</td>
                            <td>4</td>
                            <td>3</td>
                            <td>2</td>
                            <td>1</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td><button ng-click="changePortBbit(7)">7</button></td>
                            <td><button ng-click="changePortBbit(6)">6</button></td>
                            <td><button ng-click="changePortBbit(5)">5</button></td>
                            <td><button ng-click="changePortBbit(4)">4</button></td>
                            <td><button ng-click="changePortBbit(3)">3</button></td>
                            <td><button ng-click="changePortBbit(2)">2</button></td>
                            <td><button ng-click="changePortBbit(1)">1</button></td>
                            <td><button ng-click="changePortBbit(0)">0</button></td>
                        </tr>
                    </table>
                </div>
            <div class="ram">
                <!--Anzeige der General Purpose Registers-->
                <h2>Speicherbelegung</h2>
                <table ng-if="ram" class="table table-striped">
                    <tr>
                        <td><button type="button" size="2" class="btn btn-default" data-toggle="modal" data-target="#ramModal" data-whatever="00h">{{ram[0]}}</button></td>	 <td><button type="button" size="2" class="btn btn-default">{{ram[1]}}</button></td>  <td><button type="button" size="2" class="btn btn-default">{{ram[2]}}</button></td>  <td><button type="button" size="2" class="btn btn-default">{{ram[3]}}</button></td>  <td><button type="button" size="2" class="btn btn-default">{{ram[4]}}</button></td>	 <td><button type="button" size="2" class="btn btn-default">{{ram[5]}}</button></td>  <td><button type="button" size="2" class="btn btn-default">{{ram[6]}}</button></td>  <td><button type="button" size="2" class="btn btn-default">{{ram[7]}}</button></td>
                    </tr>
                    <tr>
                        <td>{{ram[8]}}</td>  <td>{{ram[9]}}</td>  <td>{{ram[10]}}</td> <td>{{ram[11]}}</td> <td>{{ram[12]}}</td> <td>{{ram[13]}}</td> <td>{{ram[14]}}</td> <td>{{ram[15]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[16]}}</td> <td>{{ram[17]}}</td> <td>{{ram[18]}}</td> <td>{{ram[19]}}</td>	<td>{{ram[20]}}</td> <td>{{ram[21]}}</td> <td>{{ram[22]}}</td> <td>{{ram[23]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[24]}}</td> <td>{{ram[25]}}</td> <td>{{ram[26]}}</td> <td>{{ram[27]}}</td>	<td>{{ram[28]}}</td> <td>{{ram[29]}}</td> <td>{{ram[30]}}</td> <td>{{ram[31]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[32]}}</td> <td>{{ram[33]}}</td> <td>{{ram[34]}}</td> <td>{{ram[35]}}</td>	<td>{{ram[36]}}</td> <td>{{ram[37]}}</td> <td>{{ram[38]}}</td> <td>{{ram[39]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[40]}}</td> <td>{{ram[41]}}</td> <td>{{ram[42]}}</td> <td>{{ram[43]}}</td>	<td>{{ram[44]}}</td> <td>{{ram[45]}}</td> <td>{{ram[46]}}</td> <td>{{ram[47]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[48]}}</td> <td>{{ram[49]}}</td> <td>{{ram[50]}}</td> <td>{{ram[51]}}</td>	<td>{{ram[52]}}</td> <td>{{ram[53]}}</td> <td>{{ram[54]}}</td> <td>{{ram[55]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[56]}}</td> <td>{{ram[57]}}</td> <td>{{ram[58]}}</td> <td>{{ram[59]}}</td>	<td>{{ram[60]}}</td> <td>{{ram[61]}}</td> <td>{{ram[62]}}</td> <td>{{ram[63]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[64]}}</td> <td>{{ram[65]}}</td> <td>{{ram[66]}}</td> <td>{{ram[67]}}</td> <td>{{ram[68]}}</td> <td>{{ram[69]}}</td> <td>{{ram[70]}}</td> <td> {{ram[71]}}</td>
                    </tr>
                    <tr>
                        <td>{{ram[72]}}</td> <td>{{ram[73]}}</td> <td>{{ram[74]}}</td> <td>{{ram[75]}}</td> <td>{{ram[76]}}</td> <td>{{ram[77]}}</td> <td>{{ram[78]}}</td> <td>{{ram[79]}}</td>
                    </tr>
                </table>
            </div>

        <!--Zusätzliche Labels für verschiedene Anzeigen-->
            </div>
            <label>DigitalCarry:{{digitCarry}}</label>
            <label>ZeroFlag:{{zeroFlag}}</label>
            <label>CarryFlag:{{carry}}</label>
            <label>Instructions:{{Instructioncounter}}</label>
            <br>
            <label>W_Register:{{w_reg}}</label>
        </div>
    </div>
    </div>

    <div class="modal fade bs-example-modal-sm" id="ramModal" tabindex="-1" role="dialog" aria-labelledby="beispielModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Schließen"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="beispielModalLabel">Speicheradresse</h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="empfaenger-name" class="control-label">Neuer Wert:</label>
                            <input type="text" class="form-control" id="empfaenger-name" size="2" maxlength="2" minlength="2">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Schließen</button>
                    <button type="button" class="btn btn-primary">Speichern</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>